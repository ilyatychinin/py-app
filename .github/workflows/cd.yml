# name: CD

# on:
#   push:
#     branches: [ main ]
#   pull_request:
#     branches: [ main ]

# jobs:
#   cd:
#     runs-on: self-hosted  # ‚Üê –í–∞—à –ª–æ–∫–∞–ª—å–Ω—ã–π runner
#     steps:
#       - uses: actions/checkout@v4
#         with:
#           path: my-python-app  # Checkout –≤ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é

#       - name: üöÄ Local Deploy
#         run: |
#           echo "üöÄ Self-hosted deploy –Ω–∞ localhost!"
          
#           cd /home/ilyatychinin/devops_train_projects/my-python-app || exit 1
          
#           git pull origin main
          
#           docker compose down
          
#           docker compose up -d
          
#           sleep 10
          
#           curl -f http://localhost:8080/health || echo "Health check failed"
          
#           docker compose ps
          
#           echo "‚úÖ Deploy complete!"
